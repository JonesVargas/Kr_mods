{% extends 'mods/base.html' %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: flex-start; padding: 20px; gap: 40px;">
    
    <!-- √Årea de Sugest√£o -->
    <div style="width: 45%; background: #222; padding: 20px; border-radius: 10px; display: flex; flex-direction: column; align-items: center;">
        <h2 style="color: #FFA500; font-family: 'Press Start 2P', cursive; text-align: center;">Deixe aqui sua sugest√£o de mod</h2>
        <form method="POST" action="{% url 'sugerir' %}">
            {% csrf_token %}
            <label for="descricao" style="color: white; font-size: 18px;">Digite sua sugest√£o:</label>
            <textarea name="descricao" id="descricao" required style="width: 100%; height: 150px; font-size: 16px; padding: 10px; border-radius: 5px; border: 1px solid #ccc;"></textarea>
            <button type="submit" style="width: 100%; background: #ff4500; color: white; font-size: 18px; padding: 10px; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px;">Enviar Sugest√£o</button>
        </form>       
    </div>
    
    <!-- √Årea de Sugest√µes -->
    <div style="width: 50%; background: #222; padding: 20px; border-radius: 10px;">
        <h2 style="color: #FFA500; font-family: 'Press Start 2P', cursive; text-align: center;">Sugest√µes dos Usu√°rios</h2>
        
        <div style="display: flex; flex-direction: column; gap: 15px;">
            {% for sugestao in sugestoes %}
                <div style="background: #333; padding: 15px; border-radius: 5px; color: white; margin-bottom: 10px;">
                    <strong style="color: #ffcc00;">{{ sugestao.usuario.username }}</strong>
                    <p>{{ sugestao.descricao }}</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
                        <form method="POST" action="{% url 'like_sugestao' sugestao.id %}">
                            {% csrf_token %}
                            <button type="submit" style="background: none; border: none; cursor: pointer; color: #00ff00; font-size: 20px;">üëç {{ sugestao.likes }}</button>
                        </form>
                        <form method="POST" action="{% url 'dislike_sugestao' sugestao.id %}">
                            {% csrf_token %}
                            <button type="submit" style="background: none; border: none; cursor: pointer; color: #ff0000; font-size: 20px;">üëé {{ sugestao.dislikes }}</button>
                        </form>
                    </div>
                </div>
            {% empty %}
                <p style="color: white; text-align: center;">Nenhuma sugest√£o ainda.</p>
            {% endfor %}
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const form = document.querySelector("form");
    form.addEventListener("submit", function() {
        setTimeout(function() {
            window.location.reload();
        }, 500);  // Recarrega a p√°gina 0.5s ap√≥s envio
    });
});
</script>

{% endblock %}
